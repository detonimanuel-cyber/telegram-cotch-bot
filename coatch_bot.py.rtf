{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardirnatural\partightenfactor0

\f0\fs24 \cf0 import os\
import telebot\
import openai\
\
# Prende i token dalle variabili d'ambiente\
TELEGRAM_TOKEN = os.getenv("TELEGRAM_TOKEN")\
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")\
openai.api_key = OPENAI_API_KEY\
\
bot = telebot.TeleBot(TELEGRAM_TOKEN)\
\
SYSTEM_PROMPT = "Sei un coach motivazionale energico, diretto e ironico. Dai incoraggiamenti e mini-task pratici."\
\
def ask_openai(user_message):\
    try:\
        response = openai.ChatCompletion.create(\
            model="gpt-4o-mini",\
            messages=[\
                \{"role": "system", "content": SYSTEM_PROMPT\},\
                \{"role": "user", "content": user_message\}\
            ],\
            max_tokens=250,\
            temperature=0.9\
        )\
        return response.choices[0].message.content.strip()\
    except Exception as e:\
        return "Errore col cervello centrale, riprova tra poco."\
\
@bot.message_handler(commands=['start'])\
def start(msg):\
    bot.reply_to(msg, "Ciao! Sono il tuo Coach Bot \uc0\u55357 \u56490  Scrivimi qualcosa per iniziare!")\
\
@bot.message_handler(func=lambda m: True)\
def handle_message(msg):\
    reply = ask_openai(msg.text)\
    bot.reply_to(msg, reply)\
\
bot.infinity_polling()}